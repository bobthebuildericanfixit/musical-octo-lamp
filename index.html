<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Retro Bowl College - Modded Client</title>
    <style>
        body { background: #000; color: #ccc; margin: 0; overflow: hidden; font-family: sans-serif; }
        canvas { image-rendering: pixelated; width: 100vw; height: 100vh; display: block; }

        #mod-menu {
            position: fixed; top: 20px; left: 20px; z-index: 10000;
            background: rgba(20, 20, 20, 0.9); border: 2px solid #ed1c24;
            padding: 10px; border-radius: 8px; user-select: none;
        }
        .mod-btn {
            background: #ed1c24; color: white; border: none; padding: 8px;
            cursor: pointer; font-weight: bold; width: 100%; margin-top: 5px;
        }
    </style>
</head>
<body>
    <div id="mod-menu">
        <div style="font-weight: bold; color: #ed1c24; margin-bottom: 5px;">CLIENT LOADED</div>
        <button class="mod-btn" onclick="applyCredits()">+inf CREDITS</button>
    </div>

    <script src="poki-sdk.js"></script>
    <script src="html5game/RetroBowl.js"></script>

    <script>
        // 1. THE TEXT MOD (REPLACING "NEW STAR GAMES")
        // We hook into the internal string handler of GameMaker
        const originalSetText = window.decodeURIComponent;
        window.decodeURIComponent = function(str) {
            let decoded = originalSetText(str);
            if (decoded.includes("New Star Games")) {
                return decoded.replace("New Star Games", "MODDED BY Prospect1700");
            }
            return decoded;
        };

        // 2. STABLE BOOT
        window.addEventListener("load", function() {
            if (typeof GameMaker_Init === "function") GameMaker_Init();
        });

        // 3. STABLE STORAGE MOD (CREDITS)
        function applyCredits() {
            const key = Object.keys(localStorage).find(k => k.includes("RetroBowl") && k.includes(".ini"));
            if (key) {
                let data = localStorage.getItem(key);
                data = data.replace(/coach_credit="(\d+)"/g, 'coach_credit="999999999999999"');
                localStorage.setItem(key, data);
                location.reload();
            } else {
                alert("Play 1 week first!");
            }
        }
    </script>
</body>
</html>
